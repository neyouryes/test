<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Ne, Coffee Fitting Test</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      margin:0;
      font-family: 'Noto Sans KR', sans-serif;
      font-size:16px;
      line-height:1.5;
      background:#fafafa;
      color:#333;
    }
    .wrap {max-width:600px;margin:0 auto;}

    /* 배너 */
    .banner {position:relative;width:100%;height:220px;overflow:hidden;}
    .banner img {width:100%;height:100%;object-fit:cover;}
    .banner-text {
      position:absolute;top:0;left:0;right:0;bottom:0;
      display:flex;flex-direction:column;justify-content:center;align-items:center;
      color:#fff;
      background:rgba(0,0,0,0.35);
    }
    .banner-top {font-size:26px;font-weight:600;}
    .banner-bottom {font-size:15px;margin-top:8px;}

    /* 질문 */
    .question {margin:30px 20px;}
    .question h2 {font-size:18px;margin-bottom:15px;}

    /* Q1 라디오 2줄 레이아웃 */
    .q1-grid {display:grid;grid-template-columns:1fr 1fr;gap:10px;}
    .q1-option {
      border:1px solid #ddd;border-radius:8px;padding:10px;text-align:center;cursor:pointer;
    }
    .q1-option input {margin-right:5px;}

    /* 선택지 버튼 */
    .option {margin:5px 0;padding:10px;border:1px solid #ddd;border-radius:8px;cursor:pointer;}
    .option input {margin-right:8px;}

    /* 색상 선택 Q3 */
    .color-options {display:flex;gap:10px;flex-wrap:wrap;}
    .color-box {
      width:50px;height:50px;border-radius:50%;cursor:pointer;
      border:2px solid transparent;
      transition:0.2s;
    }
    .color-box.selected {border:2px solid #333;transform:scale(1.05);}

    /* 진행바 */
    .progress {height:6px;background:#eee;margin:20px;}
    .progress-inner {height:100%;width:0;background:#333;transition:width 0.3s;}

    /* 결과 모달 */
    .result {display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);
      display:flex;align-items:center;justify-content:center;}
    .result.show {display:flex;}
    .result-box {background:#fff;padding:20px;border-radius:12px;width:90%;max-width:500px;text-align:center;}
    .bean {margin:10px 0;}
    .bean-title {font-weight:bold;margin-bottom:4px;}
    .bean-note {font-size:14px;color:#666;}
    .dot {display:inline-block;width:12px;height:12px;border-radius:50%;margin-right:6px;}

    /* 모바일 최적화 */
    @media (max-width:480px){
      body {font-size:14px;}
      .banner-top {font-size:20px;}
      .banner-bottom {font-size:13px;}
      .question h2 {font-size:16px;}
    }
  </style>
</head>
<body>
<div class="wrap">
  <div class="banner">
    <img id="banner-img" src="banner1.jpg" alt="배너">
    <div class="banner-text">
      <div class="banner-top">Ne, Coffee Fitting Test</div>
      <div class="banner-bottom">취향이 만나는 특별한 순간</div>
    </div>
  </div>

  <form id="quiz">
    <div class="progress"><div id="prog" class="progress-inner"></div></div>

    <!-- Q1 -->
    <div class="question">
      <h2>Q1. 나의 성향을 선택해주세요</h2>
      <div class="q1-grid">
        <label class="q1-option"><input type="radio" name="mbti-ei" value="E">E (외향형)</label>
        <label class="q1-option"><input type="radio" name="mbti-ei" value="I">I (내향형)</label>
        <label class="q1-option"><input type="radio" name="mbti-ns" value="N">N (직관형)</label>
        <label class="q1-option"><input type="radio" name="mbti-ns" value="S">S (감각형)</label>
        <label class="q1-option"><input type="radio" name="mbti-ft" value="F">F (감정형)</label>
        <label class="q1-option"><input type="radio" name="mbti-ft" value="T">T (사고형)</label>
        <label class="q1-option"><input type="radio" name="mbti-jp" value="J">J (판단형)</label>
        <label class="q1-option"><input type="radio" name="mbti-jp" value="P">P (인식형)</label>
      </div>
    </div>

    <!-- Q2 -->
    <div class="question">
      <h2>Q2. 지금 당신의 하루에 더 가까운 이미지는?</h2>
      <label class="option"><input type="radio" name="q2" value="AB">따뜻한 위로와 달콤한 순간</label>
      <label class="option"><input type="radio" name="q2" value="CD">새로운 도전과 모험의 에너지</label>
      <label class="option"><input type="radio" name="q2" value="EF">활기찬 열정과 불꽃 같은 분위기</label>
      <label class="option"><input type="radio" name="q2" value="GH">차분함 속의 깊은 사색</label>
    </div>

    <!-- Q3 -->
    <div class="question">
      <h2>Q3. 마음이 끌리는 색감을 골라주세요</h2>
      <div class="color-options">
        <label><input type="radio" name="q3" value="AC"><div class="color-box" style="background:linear-gradient(45deg,#F6B48F,#F9D28E);"></div></label>
        <label><input type="radio" name="q3" value="BD"><div class="color-box" style="background:linear-gradient(45deg,#C3A6E8,#F28C8C);"></div></label>
        <label><input type="radio" name="q3" value="EG"><div class="color-box" style="background:linear-gradient(45deg,#F5E08C,#C9A588);"></div></label>
        <label><input type="radio" name="q3" value="FH"><div class="color-box" style="background:linear-gradient(45deg,#E6A18F,#B58C8C);"></div></label>
      </div>
    </div>

    <!-- Q4 -->
    <div class="question">
      <h2>Q4. 지금 떠오르는 장면은?</h2>
      <label class="option"><input type="radio" name="q4" value="AE">햇살 가득한 길 위 산책</label>
      <label class="option"><input type="radio" name="q4" value="BF">사람들과 웃음소리 가득한 공간</label>
      <label class="option"><input type="radio" name="q4" value="CG">고요한 달빛 아래의 휴식</label>
      <label class="option"><input type="radio" name="q4" value="DH">모험 같은 여행의 순간</label>
    </div>

    <!-- Q5 (방식은 직접적으로 드러나지 않음) -->
    <div class="question">
      <h2>Q5. 커피를 즐기는 나의 방식은?</h2>
      <label class="option"><input type="radio" name="method" value="M1">깊고 진한 여운이 오래 남는 한 잔</label>
      <label class="option"><input type="radio" name="method" value="M2">향미가 선명하고 깔끔한 한 잔</label>
      <label class="option"><input type="radio" name="method" value="M3">부드럽고 달콤하게 시원한 한 잔</label>
    </div>

    <div style="text-align:center;margin:20px;">
      <button type="button" id="submit">결과 보기</button>
    </div>
  </form>
  <!-- 결과 모달 -->
  <div id="result" class="result">
    <div class="result-box">
      <h2 id="combo-title"></h2>
      <p id="emoji-line" style="font-size:22px;margin:10px 0;"></p>
      <p id="mbti-line" style="margin:15px 0;font-style:italic;"></p>

      <!-- 원두 카드 -->
      <div id="bean-cards"></div>

      <!-- 방식 추천 (원두 카드 아래, 글귀만) -->
      <p id="method-text" style="margin-top:20px;font-weight:500;"></p>

      <div style="margin-top:20px;">
        <button id="again">다시 하기</button>
        <button id="first">처음으로</button>
        <button id="close">닫기</button>
      </div>
    </div>
  </div>
</div>

<script>
/* ===== 배너 랜덤 (6장) ===== */
const bannerImgs=["banner1.jpg","banner2.jpg","banner3.jpg","banner4.jpg","banner5.jpg","banner6.jpg"];
document.getElementById("banner-img").src = bannerImgs[Math.floor(Math.random()*bannerImgs.length)];

/* ===== 데이터 세트 ===== */
const TYPES={
  A:{en:"Chance",ko:"행운",cup:"캬라멜, 로스트 아몬드",emoji:"🍀",color:"#F6B48F"},
  B:{en:"Amante",ko:"연인",cup:"건자두, 레드와인",emoji:"❤️",color:"#C3A6E8"},
  C:{en:"Lune",ko:"달",cup:"홍시, 캬라멜시럽",emoji:"🌙",color:"#F9D28E"},
  D:{en:"Colombia El Diviso Washed",ko:"콜롬비아 워시드",cup:"라즈베리, 블루베리, 풍선껌",emoji:"🍓",color:"#F28C8C"},
  E:{en:"Peru El Cedro Natural",ko:"페루 내추럴",cup:"사향벌꿀, 배과즙, 시나몬",emoji:"🍯",color:"#F5E08C"},
  F:{en:"Rwanda Gitoki Washed",ko:"르완다 워시드",cup:"자두, 칵테일",emoji:"🍒",color:"#E6A18F"},
  G:{en:"Cameroon Oku Natural",ko:"카메룬 내추럴",cup:"군밤, 찐고구마",emoji:"🌰",color:"#C9A588"},
  H:{en:"Ethiopia Aricha Washed",ko:"에티오피아 워시드",cup:"다크 체리, 밀크 초콜렛",emoji:"🍫",color:"#B58C8C"}
};

const COMBO_TITLES={
  "A+B":"행운의 연인","A+C":"달빛 아래 행운","A+D":"운명의 모험","A+E":"황금빛 향연","A+F":"열정의 별빛","A+G":"따스한 행운","A+H":"달콤한 축복",
  "B+C":"달빛 로망","B+D":"사랑의 항해","B+E":"꿀처럼 달콤한 사랑","B+F":"불꽃 같은 연정","B+G":"포근한 약속","B+H":"초콜릿 키스",
  "C+D":"달과 열정의 여정","C+E":"달빛의 향기","C+F":"달의 불꽃","C+G":"따뜻한 달빛","C+H":"달밤의 속삭임",
  "D+E":"과일빛 연가","D+F":"별빛 열정","D+G":"모험의 기억","D+H":"베리의 서정",
  "E+F":"꿀빛 불꽃","E+G":"황금빛 온기","E+H":"달콤한 서약",
  "F+G":"캠프파이어 로망스","F+H":"칵테일 키스",
  "G+H":"겨울밤의 고백"
};

const MBTI_TEMP={
  ISTJ:{line:"질서 속의 평온, 따뜻한 컵이 하루를 단단하게 해줄 거예요.", temp:"hot"},
  ISFJ:{line:"조용한 배려에 어울리는 온기, 부드럽게 스며드는 따뜻함을.", temp:"hot"},
  INFJ:{line:"고요한 사색에 어울리는 온기, 마음을 감싸는 한 잔.", temp:"hot"},
  INTJ:{line:"선명한 집중을 위한 따뜻함, 차분히 설계된 한 모금.", temp:"hot"},
  ISTP:{line:"선택은 간결하게, 차갑게 깔끔한 한 잔이 딱.", temp:"ice"},
  ISFP:{line:"감각에 스며드는 청량함, 차갑게 더 살아나는 순간들.", temp:"ice"},
  INFP:{line:"섬세한 마음에 잔잔한 온기, 따뜻함이 오래 남아요.", temp:"hot"},
  INTP:{line:"머릿속 흐름을 깨우는 시원함, 맑고 차가운 산뜻함.", temp:"ice"},
  ESTP:{line:"지금 이 순간, 차갑게 터지는 리듬으로 속도를 올려요.", temp:"ice"},
  ESFP:{line:"반짝이는 오늘, 시원함이 더 빛나게 해줄 거예요.", temp:"ice"},
  ENFP:{line:"활기찬 스파크에 청량한 응답, 차갑게 식힌 한 잔으로!", temp:"ice"},
  ENTP:{line:"아이디어의 파도를 타고, 크리스피한 시원함으로 전개하세요.", temp:"ice"},
  ESTJ:{line:"명확한 결정을 돕는 온기, 단단하고 깔끔한 따뜻함.", temp:"hot"},
  ESFJ:{line:"따뜻한 마음에 어울리는 온도, 부드럽게 함께 머무는 한 잔.", temp:"hot"},
  ENFJ:{line:"사람과 순간을 잇는 온기, 마음을 데워주는 따뜻함.", temp:"hot"},
  ENTJ:{line:"추진력을 위한 집중, 뜨겁게 정리되는 한 모금.", temp:"hot"}
};

const METHODS={
  M1:{text:"아메리카노로 즐기세요. 진한 농도와 긴 여운이 당신의 몰입을 더 깊게 만들어줄 거예요."},
  M2:{text:"핸드드립으로 즐기세요. 선명한 향미와 깔끔한 질감이 커피의 진심을 드러내줄 거예요."},
  M3:{text:"콜드브루로 즐기세요. 부드럽고 달콤한 여운이 시원하게 하루를 바꿔줄 거예요."}
};

const METHOD_EMOJI={M1:"☕️",M2:"🍵",M3:"🥤"};
const TEMP_EMOJI={hot:"🔥",ice:"❄️"};

/* ===== 진행바 ===== */
const form=document.getElementById('quiz');
const submitBtn=document.getElementById('submit');
const prog=document.getElementById('prog');

function updateProgress(){
  let count=0;const required=5;
  if(form.querySelector('input[name="mbti-ei"]:checked')&&
     form.querySelector('input[name="mbti-ns"]:checked')&&
     form.querySelector('input[name="mbti-ft"]:checked')&&
     form.querySelector('input[name="mbti-jp"]:checked')) count++;
  if(form.querySelector('input[name="q2"]:checked'))count++;
  if(form.querySelector('input[name="q3"]:checked'))count++;
  if(form.querySelector('input[name="q4"]:checked'))count++;
  if(form.querySelector('input[name="method"]:checked'))count++;
  const pct=Math.round((count/required)*100);
  prog.style.width=pct+'%';
  submitBtn.disabled=count!==required;
}
form.addEventListener('change',updateProgress);updateProgress();

/* ===== 유틸 ===== */
function pairKey(a,b){return[a,b].sort().join('+');}
function dot(hex){return`<span class="dot" style="background:${hex}"></span>`;}
function getMBTI(){
  const ei=form.querySelector('input[name="mbti-ei"]:checked')?.value||'';
  const ns=form.querySelector('input[name="mbti-ns"]:checked')?.value||'';
  const ft=form.querySelector('input[name="mbti-ft"]:checked')?.value||'';
  const jp=form.querySelector('input[name="mbti-jp"]:checked')?.value||'';
  return ei+ns+ft+jp;
}

/* ===== 결과 생성 ===== */
function showResult(){
  const totals={A:0,B:0,C:0,D:0,E:0,F:0,G:0,H:0};
  ["q2","q3","q4"].forEach(q=>{
    const sel=form.querySelector(`input[name="${q}"]:checked`);
    if(sel) sel.value.split("").forEach(l=>totals[l]++);
  });

  // MBTI 보조 가중치
  const ei=form.querySelector('input[name="mbti-ei"]:checked')?.value;
  const ns=form.querySelector('input[name="mbti-ns"]:checked')?.value;
  const ft=form.querySelector('input[name="mbti-ft"]:checked')?.value;
  const jp=form.querySelector('input[name="mbti-jp"]:checked')?.value;
  if(ei==="E"){totals.F+=0.5;totals.B+=0.5;} if(ei==="I"){totals.A+=0.5;totals.C+=0.5;}
  if(ns==="N"){totals.D+=0.5;totals.E+=0.5;} if(ns==="S"){totals.G+=0.5;totals.H+=0.5;}
  if(ft==="F"){totals.B+=0.5;totals.C+=0.5;} if(ft==="T"){totals.A+=0.5;totals.D+=0.5;}
  if(jp==="J"){totals.F+=0.5;totals.H+=0.5;} if(jp==="P"){totals.E+=0.5;totals.G+=0.5;}

  const ordered=Object.entries(totals).sort((a,b)=>b[1]-a[1]);
  const top1=ordered[0][0], top2=ordered[1][0];
  const T1=TYPES[top1], T2=TYPES[top2];

  const comboTitle=COMBO_TITLES[pairKey(top1,top2)] || `${T1.ko}와 ${T2.ko}의 조합`;
  document.getElementById('combo-title').textContent=comboTitle;

  const mbti=getMBTI();
  const mbtiMeta=MBTI_TEMP[mbti] || {line:"오늘의 커피가 당신에게 어울릴 거예요.", temp:"hot"};
  document.getElementById('mbti-line').textContent=mbtiMeta.line;

  const methodKey=form.querySelector('input[name="method"]:checked')?.value||"M1";
  const methodEmoji=METHOD_EMOJI[methodKey];
  const tempEmoji=(methodKey==="M3")?"❄️":(mbtiMeta.temp==="ice"?"❄️":"🔥");
  document.getElementById('emoji-line').textContent=`${T1.emoji}${T2.emoji}${tempEmoji}${methodEmoji}`;

  document.getElementById('bean-cards').innerHTML=`
    <div class="bean">
      <p class="bean-title">${dot(T1.color)}${T1.ko} · ${T1.en}</p>
      <p class="bean-note">${T1.cup}</p>
    </div>
    <div class="bean">
      <p class="bean-title">${dot(T2.color)}${T2.ko} · ${T2.en}</p>
      <p class="bean-note">${T2.cup}</p>
    </div>
  `;

  document.getElementById('method-text').textContent=METHODS[methodKey].text;

  document.getElementById('result').classList.add('show');
}

/* ===== 이벤트 ===== */
submitBtn.addEventListener('click',showResult);
document.getElementById('close').onclick=()=>document.getElementById('result').classList.remove('show');
document.getElementById('again').onclick=()=>{document.getElementById('result').classList.remove('show');form.reset();updateProgress();};
document.getElementById('first').onclick=()=>{document.getElementById('result').classList.remove('show');form.reset();updateProgress();window.scrollTo({top:0,behavior:'smooth'});};
</script>
</body>
</html>
