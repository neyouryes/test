<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Ne, Coffee Fitting Test</title>
  <style>
    body {margin:0;font-family:Arial, sans-serif;font-size:16px;line-height:1.5;background:#fafafa;color:#333;}
    .wrap {max-width:600px;margin:0 auto;}
    .banner {position:relative;width:100%;height:200px;overflow:hidden;}
    .banner img {width:100%;height:100%;object-fit:cover;}
    .banner-text {position:absolute;top:0;left:0;right:0;bottom:0;display:flex;flex-direction:column;justify-content:center;align-items:center;color:#fff;background:rgba(0,0,0,0.3);}
    .banner-top {font-size:24px;font-weight:bold;}
    .banner-bottom {font-size:14px;margin-top:5px;}
    h2 {font-size:20px;margin:20px 0 10px;}
    label {display:block;margin:5px 0;cursor:pointer;}
    input[type="radio"] {margin-right:6px;}
    .mbti-q1 {display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px;}
    .color-options {display:flex;gap:10px;flex-wrap:wrap;}
    .color-box {width:40px;height:40px;border-radius:50%;cursor:pointer;border:2px solid transparent;}
    .color-box input {display:none;}
    .color-box.selected {border:2px solid #333;}
    .progress {width:100%;background:#eee;height:8px;border-radius:4px;margin:20px 0;}
    #prog {height:8px;background:#333;width:0;border-radius:4px;}
    button {padding:10px 20px;margin:10px 5px;border:none;border-radius:6px;background:#333;color:#fff;cursor:pointer;}
    button:disabled {background:#aaa;}
    /* 결과 모달 */
    #result {position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);display:none;align-items:center;justify-content:center;z-index:100;}
    #result.show {display:flex;}
    .result-box {background:#fff;border-radius:10px;max-width:500px;padding:20px;text-align:center;}
    .bean {margin:10px 0;}
    .bean-title {font-weight:bold;}
    .dot {display:inline-block;width:12px;height:12px;border-radius:50%;margin-right:6px;}
    @media(max-width:480px){body{font-size:14px;}h2{font-size:18px;}.banner{height:150px;}.banner-top{font-size:18px;}}
  </style>
</head>
<body>
<div class="wrap">
  <div class="banner">
    <img id="banner-img" src="banner1.jpg" alt="배너">
    <div class="banner-text">
      <div class="banner-top">Ne, Coffee Fitting Test</div>
      <div class="banner-bottom">취향이 만나는 특별한 순간</div>
    </div>
  </div>

  <form id="quiz">
    <!-- Q1 MBTI -->
    <h2>Q1. 당신의 MBTI 성향은?</h2>
    <div class="mbti-q1">
      <label><input type="radio" name="mbti-ei" value="E">E (외향형)</label>
      <label><input type="radio" name="mbti-ei" value="I">I (내향형)</label>
      <label><input type="radio" name="mbti-ns" value="N">N (직관형)</label>
      <label><input type="radio" name="mbti-ns" value="S">S (감각형)</label>
    </div>
    <div class="mbti-q1">
      <label><input type="radio" name="mbti-ft" value="F">F (감정형)</label>
      <label><input type="radio" name="mbti-ft" value="T">T (사고형)</label>
      <label><input type="radio" name="mbti-jp" value="J">J (판단형)</label>
      <label><input type="radio" name="mbti-jp" value="P">P (인식형)</label>
    </div>

    <!-- Q2 -->
    <h2>Q2. 지금 마시고 싶은 분위기는?</h2>
    <label><input type="radio" name="q2" value="AB">🍀 따뜻하고 편안한 순간</label>
    <label><input type="radio" name="q2" value="CD">🍓 상쾌하고 선명한 순간</label>
    <label><input type="radio" name="q2" value="EF">🍒 활기차고 열정적인 순간</label>
    <label><input type="radio" name="q2" value="GH">🌰 고요하고 깊이 있는 순간</label>

    <!-- Q3 -->
    <h2>Q3. 오늘 마음을 표현하는 색은?</h2>
    <div class="color-options">
      <label class="color-box" style="background:linear-gradient(45deg,#F6B48F,#F28C8C)"><input type="radio" name="q3" value="AD"></label>
      <label class="color-box" style="background:linear-gradient(45deg,#C3A6E8,#F5E08C)"><input type="radio" name="q3" value="BE"></label>
      <label class="color-box" style="background:linear-gradient(45deg,#F9D28E,#E6A18F)"><input type="radio" name="q3" value="CF"></label>
      <label class="color-box" style="background:linear-gradient(45deg,#C9A588,#B58C8C)"><input type="radio" name="q3" value="GH"></label>
    </div>

    <!-- Q4 -->
    <h2>Q4. 어떤 상황에서 즐기고 싶나요?</h2>
    <label><input type="radio" name="q4" value="AC">🌙 혼자만의 휴식</label>
    <label><input type="radio" name="q4" value="BD">❤️ 사랑하는 사람과 함께</label>
    <label><input type="radio" name="q4" value="EF">🍒 열정적인 순간</label>
    <label><input type="radio" name="q4" value="GH">🍫 조용한 몰입</label>

    <!-- Q5 -->
    <h2>Q5. 어떤 방식이 어울릴까요?</h2>
    <label><input type="radio" name="method" value="M1">☕ 깊고 진한 아메리카노</label>
    <label><input type="radio" name="method" value="M2">🍵 향미가 선명한 핸드드립</label>
    <label><input type="radio" name="method" value="M3">🥤 부드럽고 달콤한 콜드브루</label>

    <div class="progress"><div id="prog"></div></div>
    <button type="button" id="submit" disabled>결과 보기</button>
  </form>
</div>

<!-- 결과 모달 -->
<div id="result">
  <div class="result-box">
    <h2 id="combo-title"></h2>
    <p id="mbti-line"></p>
    <p id="emoji-line"></p>
    <div id="bean-cards"></div>
    <p id="method-text"></p>
    <button id="close">닫기</button>
    <button id="again">다시하기</button>
    <button id="first">처음으로</button>
  </div>
</div>

<!-- 랜덤 배너 -->
<script>
const banners=["banner1.jpg","banner2.jpg","banner3.jpg","banner4.jpg","banner5.jpg","banner6.jpg"];
document.getElementById("banner-img").src=banners[Math.floor(Math.random()*banners.length)];
</script>

<!-- 데이터 & 로직 (이전 버전 동일) -->
<script>
/* === 데이터 세트 / 함수 / 결과 생성 (생략 없이 동일) === */
/* ===== 데이터 세트 ===== */
// 원두 타입
const TYPES={
  A:{en:"Chance",ko:"행운",cup:"캬라멜, 로스트 아몬드",emoji:"🍀",color:"#F6B48F"},
  B:{en:"Amante",ko:"연인",cup:"건자두, 레드와인",emoji:"❤️",color:"#C3A6E8"},
  C:{en:"Lune",ko:"달",cup:"홍시, 캬라멜시럽",emoji:"🌙",color:"#F9D28E"},
  D:{en:"Colombia El Diviso Washed",ko:"콜롬비아 워시드",cup:"라즈베리, 블루베리, 풍선껌",emoji:"🍓",color:"#F28C8C"},
  E:{en:"Peru El Cedro Natural",ko:"페루 내추럴",cup:"사향벌꿀, 배과즙, 시나몬",emoji:"🍯",color:"#F5E08C"},
  F:{en:"Rwanda Gitoki Washed",ko:"르완다 워시드",cup:"자두, 칵테일",emoji:"🍒",color:"#E6A18F"},
  G:{en:"Cameroon Oku Natural",ko:"카메룬 내추럴",cup:"군밤, 찐고구마",emoji:"🌰",color:"#C9A588"},
  H:{en:"Ethiopia Aricha Washed",ko:"에티오피아 워시드",cup:"다크 체리, 밀크 초콜렛",emoji:"🍫",color:"#B58C8C"}
};

// 조합 타이틀
const COMBO_TITLES={
  "A+B":"행운의 연인","A+C":"달빛 아래 행운","A+D":"운명의 모험","A+E":"황금빛 향연","A+F":"열정의 별빛","A+G":"따스한 행운","A+H":"달콤한 축복",
  "B+C":"달빛 로망","B+D":"사랑의 항해","B+E":"꿀처럼 달콤한 사랑","B+F":"불꽃 같은 연정","B+G":"포근한 약속","B+H":"초콜릿 키스",
  "C+D":"달과 열정의 여정","C+E":"달빛의 향기","C+F":"달의 불꽃","C+G":"따뜻한 달빛","C+H":"달밤의 속삭임",
  "D+E":"과일빛 연가","D+F":"별빛 열정","D+G":"모험의 기억","D+H":"베리의 서정",
  "E+F":"꿀빛 불꽃","E+G":"황금빛 온기","E+H":"달콤한 서약",
  "F+G":"캠프파이어 로망스","F+H":"칵테일 키스",
  "G+H":"겨울밤의 고백"
};

// MBTI 기반 문구 & 온도
const MBTI_TEMP={
  ISTJ:{line:"질서 속의 평온, 따뜻한 컵이 하루를 단단하게 해줄 거예요.", temp:"hot"},
  ISFJ:{line:"조용한 배려에 어울리는 온기, 부드럽게 스며드는 따뜻함을.", temp:"hot"},
  INFJ:{line:"고요한 사색에 어울리는 온기, 마음을 감싸는 한 잔.", temp:"hot"},
  INTJ:{line:"선명한 집중을 위한 따뜻함, 차분히 설계된 한 모금.", temp:"hot"},
  ISTP:{line:"선택은 간결하게, 차갑게 깔끔한 한 잔이 딱.", temp:"ice"},
  ISFP:{line:"감각에 스며드는 청량함, 차갑게 더 살아나는 순간들.", temp:"ice"},
  INFP:{line:"섬세한 마음에 잔잔한 온기, 따뜻함이 오래 남아요.", temp:"hot"},
  INTP:{line:"머릿속 흐름을 깨우는 시원함, 맑고 차가운 산뜻함.", temp:"ice"},
  ESTP:{line:"지금 이 순간, 차갑게 터지는 리듬으로 속도를 올려요.", temp:"ice"},
  ESFP:{line:"반짝이는 오늘, 시원함이 더 빛나게 해줄 거예요.", temp:"ice"},
  ENFP:{line:"활기찬 스파크에 청량한 응답, 차갑게 식힌 한 잔으로!", temp:"ice"},
  ENTP:{line:"아이디어의 파도를 타고, 크리스피한 시원함으로 전개하세요.", temp:"ice"},
  ESTJ:{line:"명확한 결정을 돕는 온기, 단단하고 깔끔한 따뜻함.", temp:"hot"},
  ESFJ:{line:"따뜻한 마음에 어울리는 온도, 부드럽게 함께 머무는 한 잔.", temp:"hot"},
  ENFJ:{line:"사람과 순간을 잇는 온기, 마음을 데워주는 따뜻함.", temp:"hot"},
  ENTJ:{line:"추진력을 위한 집중, 뜨겁게 정리되는 한 모금.", temp:"hot"}
};

// 방식 (글귀만)
const METHODS={
  M1:{text:"아메리카노로 즐기세요. 진한 농도와 긴 여운이 당신의 몰입을 더 깊게 만들어줄 거예요."},
  M2:{text:"핸드드립으로 즐기세요. 선명한 향미와 깔끔한 질감이 커피의 진심을 드러내줄 거예요."},
  M3:{text:"콜드브루로 즐기세요. 부드럽고 달콤한 여운이 시원하게 하루를 바꿔줄 거예요."}
};
const METHOD_EMOJI={M1:"☕️",M2:"🍵",M3:"🥤"};
const TEMP_EMOJI={hot:"🔥",ice:"❄️"};

/* ===== 진행 관리 ===== */
const form=document.getElementById('quiz');
const submitBtn=document.getElementById('submit');
const prog=document.getElementById('prog');

function updateProgress(){
  let count=0;const required=5;
  const ei=form.querySelector('input[name="mbti-ei"]:checked');
  const ns=form.querySelector('input[name="mbti-ns"]:checked');
  const ft=form.querySelector('input[name="mbti-ft"]:checked');
  const jp=form.querySelector('input[name="mbti-jp"]:checked');
  if(ei&&ns&&ft&&jp)count++;
  if(form.querySelector('input[name="q2"]:checked'))count++;
  if(form.querySelector('input[name="q3"]:checked'))count++;
  if(form.querySelector('input[name="q4"]:checked'))count++;
  if(form.querySelector('input[name="method"]:checked'))count++;
  const pct=Math.round((count/required)*100);
  prog.style.width=pct+'%';
  submitBtn.disabled=count!==required;
}
form.addEventListener('change',updateProgress);updateProgress();

function pairKey(a,b){return[a,b].sort().join('+');}
function dot(hex){return`<span class="dot" style="background:${hex}"></span>`;}
function getMBTI(){
  const ei=form.querySelector('input[name="mbti-ei"]:checked')?.value||'';
  const ns=form.querySelector('input[name="mbti-ns"]:checked')?.value||'';
  const ft=form.querySelector('input[name="mbti-ft"]:checked')?.value||'';
  const jp=form.querySelector('input[name="mbti-jp"]:checked')?.value||'';
  return ei+ns+ft+jp;
}

/* ===== 결과 생성 ===== */
function showResult(){
  const totals={A:0,B:0,C:0,D:0,E:0,F:0,G:0,H:0};
  ["q2","q3","q4"].forEach(q=>{
    const sel=form.querySelector(`input[name="${q}"]:checked`);
    if(sel){ sel.value.split("").forEach(l=>totals[l]++); }
  });

  const ei=form.querySelector('input[name="mbti-ei"]:checked')?.value;
  const ns=form.querySelector('input[name="mbti-ns"]:checked')?.value;
  const ft=form.querySelector('input[name="mbti-ft"]:checked')?.value;
  const jp=form.querySelector('input[name="mbti-jp"]:checked')?.value;
  if(ei==="E"){totals.F+=0.5;totals.B+=0.5;} if(ei==="I"){totals.A+=0.5;totals.C+=0.5;}
  if(ns==="N"){totals.D+=0.5;totals.E+=0.5;} if(ns==="S"){totals.G+=0.5;totals.H+=0.5;}
  if(ft==="F"){totals.B+=0.5;totals.C+=0.5;} if(ft==="T"){totals.A+=0.5;totals.D+=0.5;}
  if(jp==="J"){totals.F+=0.5;totals.H+=0.5;} if(jp==="P"){totals.E+=0.5;totals.G+=0.5;}

  const ordered=Object.entries(totals).sort((a,b)=>b[1]-a[1]);
  const top1=ordered[0][0], top2=ordered[1][0];
  const T1=TYPES[top1], T2=TYPES[top2];

  const key=pairKey(top1,top2);
  const comboTitle=COMBO_TITLES[key] || `${T1.ko}와 ${T2.ko}의 조합`;
  document.getElementById('combo-title').textContent=comboTitle;

  const mbti=getMBTI();
  const mbtiMeta=MBTI_TEMP[mbti] || {line:"오늘의 커피가 당신에게 어울릴 거예요.", temp:"hot"};
  document.getElementById('mbti-line').textContent=mbtiMeta.line;

  const methodKey=form.querySelector('input[name="method"]:checked')?.value||"M1";
  const methodEmoji=METHOD_EMOJI[methodKey];
  const tempEmoji = (methodKey==="M3") ? "❄️" : (mbtiMeta.temp==="ice" ? "❄️" : "🔥");

  document.getElementById('emoji-line').textContent = `${T1.emoji}${T2.emoji}${tempEmoji}${methodEmoji}`;

  const beanCards=document.getElementById('bean-cards');
  beanCards.innerHTML = `
    <div class="bean">
      <p class="bean-title">${dot(T1.color)}${T1.ko} · ${T1.en}</p>
      <p class="bean-note">${T1.cup}</p>
    </div>
    <div class="bean">
      <p class="bean-title">${dot(T2.color)}${T2.ko} · ${T2.en}</p>
      <p class="bean-note">${T2.cup}</p>
    </div>
  `;

  document.getElementById('method-text').textContent = METHODS[methodKey].text;

  document.getElementById('result').classList.add('show');
}

/* ===== 이벤트 ===== */
submitBtn.addEventListener('click',showResult);
document.getElementById('close').onclick=()=>document.getElementById('result').classList.remove('show');
document.getElementById('again').onclick=()=>{document.getElementById('result').classList.remove('show');form.reset();updateProgress();};
document.getElementById('first').onclick=()=>{document.getElementById('result').classList.remove('show');form.reset();updateProgress();window.scrollTo({top:0,behavior:'smooth'});};
</script>
</body>
</html>
