<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ne, Coffee Fitting Test</title>

<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;700&display=swap" rel="stylesheet">

<style>
:root{
  --ink:#3B2A22; --ink-2:#5A4034; --accent:#6A4B3B;
  --surface:rgba(255,255,255,.92); --border:#E7DED6;
}
*{box-sizing:border-box}
body{
  font-family:'Noto Serif KR', serif;
  color:var(--ink); line-height:1.6;
  background:#f7f2ef; margin:0; font-size:16px;
}
.wrap{max-width:860px;margin:0 auto;padding:0 16px 72px}
.banner{position:relative;margin:0 -16px 12px;aspect-ratio:16/5;border-radius:16px;overflow:hidden;background:#000}
.banner img{width:100%;height:100%;object-fit:cover;display:block;opacity:.8}
.banner-text{position:absolute;bottom:14px;left:16px;display:flex;flex-direction:column;gap:2px;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.35)}
.banner-top{font-weight:700;font-size:1.6rem;line-height:1.2}
.banner-bottom{font-size:0.9rem;opacity:.9}

/* 카드 */
.card{background:var(--surface);border-radius:16px;box-shadow:0 10px 30px rgba(59,42,34,.18);padding:16px;margin-top:10px;border:1px solid var(--border)}
.title{margin:4px 0 2px;font-size:1.35rem;font-weight:700}
.desc{margin:0 0 12px;color:var(--ink-2);font-size:.95rem}

/* 문항 */
.q{padding:12px 0;border-top:1px dashed var(--border)}
.q:first-child{border-top:0}
.q-title{font-size:1.05rem;margin:4px 0 8px;font-weight:700}
.opts{display:grid;gap:8px}
.opt{position:relative}
.opt input{position:absolute;opacity:0;pointer-events:none}
.opt label{
  display:block;background:#fff;border:1.5px solid var(--border);border-radius:12px;padding:10px 12px;cursor:pointer;
  transition:box-shadow .15s ease,border-color .15s ease,transform .05s ease;
}
.opt label:active{transform:scale(.995)}
.opt input:checked + label{border-color:var(--accent);box-shadow:0 0 0 2px rgba(106,75,59,.12) inset}

/* MBTI 선택 */
.mbti-simple div{display:flex;gap:8px;margin-bottom:6px}
.mbti-simple label{
  flex:1;display:block;background:#fff;border:1.5px solid var(--border);border-radius:12px;
  padding:10px;text-align:center;cursor:pointer;transition:.2s;
}
.mbti-simple input{display:none}
.mbti-simple input:checked + label{border-color:var(--accent);box-shadow:0 0 0 2px rgba(106,75,59,.12) inset}

/* 색상 그라데이션 바 */
.gradient-bar {
  position: relative;
  height: 40px;
  border-radius: 10px;
  overflow: hidden;
  background: linear-gradient(
    to right,
    #F5E08C, #F9D28E, #F6B48F, #E6A18F,
    #F28C8C, #C3A6E8, #C9A588, #B58C8C
  );
  display: flex;
  margin-top: 10px;
}
.gradient-bar label { flex:1; cursor:pointer; position:relative; }
.gradient-bar input { display:none; }
.gradient-bar span { display:block; width:100%; height:100%; }
.gradient-bar input:checked + span {
  outline: 3px solid var(--accent);
  outline-offset: -3px;
  border-radius: 4px;
}

/* 제출 바 */
.submitbar{position:sticky;bottom:0;margin-top:12px;z-index:20}
.submitcard{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:10px;display:flex;align-items:center;gap:12px;box-shadow:0 8px 24px rgba(59,42,34,.18)}
.progress{flex:1;height:8px;background:#efe6de;border-radius:999px;overflow:hidden}
.progress > span{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--accent),#3b2a22);transition:width .3s ease}
.btn{border:0;border-radius:12px;padding:10px 14px;font-size:.95rem;cursor:pointer;color:#fff;background:linear-gradient(180deg,#3b2a22,#2c1f19)}
.btn[disabled]{opacity:.55;cursor:not-allowed}

/* 결과 모달 */
.result{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;padding:16px;z-index:50}
.result.show{display:flex}
.result-card{max-width:760px;width:100%;background:#fff;border-radius:18px;box-shadow:0 20px 60px rgba(0,0,0,.35);overflow:hidden}
.result-body{padding:18px 16px 20px;color:#2a1d18}
.result-title{font-size:1.5rem;margin:4px 0 6px;font-weight:800}
.combo-title{font-size:1.05rem;color:#6a4b3b;margin:0 0 10px;font-weight:600}
.emoji-line{text-align:center;font-size:1.35rem;margin:10px 0}
.bean-cards{display:flex;flex-direction:column;gap:12px;margin-top:8px}
.bean{border:1px solid var(--border);border-radius:14px;padding:10px;background:#fefcfa;text-align:center}
.bean-title{font-weight:700;font-size:1rem;margin:0}
.bean-note{font-size:0.9rem;margin:4px 0 0}
.dot{display:inline-block;width:12px;height:12px;border-radius:50%;margin-right:6px;vertical-align:middle}
.method-text{margin-top:14px;font-size:1rem;font-weight:500;color:#3b2a22;text-align:center}
.actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px;flex-wrap:wrap}
.btn-secondary{background:#efe6de;color:#3b2a22;border:0;border-radius:12px;padding:10px 14px;cursor:pointer}
.close{background:#3b2a22;color:#fff;border:0;border-radius:12px;padding:10px 14px;cursor:pointer}
.first{background:#6a4b3b;color:#fff;border:0;border-radius:12px;padding:10px 14px;cursor:pointer}

/* 모바일 */
@media (max-width:560px){
  body{font-size:14px;line-height:1.45}
  .title{font-size:1.2rem}
  .banner-top{font-size:1.2rem}
  .banner-bottom{font-size:0.8rem}
  .result-title{font-size:1.3rem}
}
</style>
</head>
<body>
<div class="wrap">
  <!-- ✅ 랜덤 배너 -->
  <div class="banner">
    <img id="banner-img" src="banner1.jpg" alt="배너">
    <div class="banner-text">
      <div class="banner-top">Ne, Coffee Fitting Test</div>
      <div class="banner-bottom">취향이 만나는 특별한 순간</div>
    </div>
  </div>

  <div class="card">
    <h1 class="title">네,커피 핏팅 테스트</h1>
    <p class="desc">5가지 질문에 답하면, 나에게 딱맞는 원두를 추천드려요.</p>

    <form id="quiz">
     <!-- Q1. MBTI -->
     <section class="q">
      <div class="q-title">Q1. 나의 MBTI는?</div>
      <div class="mbti-simple">
        <div>
          <input type="radio" id="ei-e" name="mbti-ei" value="E"><label for="ei-e">E (외향)</label>
          <input type="radio" id="ei-i" name="mbti-ei" value="I"><label for="ei-i">I (내향)</label>
        </div>
        <div>
          <input type="radio" id="ns-n" name="mbti-ns" value="N"><label for="ns-n">N (직관)</label>
          <input type="radio" id="ns-s" name="mbti-ns" value="S"><label for="ns-s">S (감각)</label>
        </div>
        <div>
          <input type="radio" id="ft-f" name="mbti-ft" value="F"><label for="ft-f">F (감정)</label>
          <input type="radio" id="ft-t" name="mbti-ft" value="T"><label for="ft-t">T (사고)</label>
        </div>
        <div>
          <input type="radio" id="jp-j" name="mbti-jp" value="J"><label for="jp-j">J (계획)</label>
          <input type="radio" id="jp-p" name="mbti-jp" value="P"><label for="jp-p">P (인식)</label>
        </div>
      </div>
     </section>

     <!-- Q2 -->
     <section class="q">
      <div class="q-title">Q2. 어떤 향미를 선호하시나요?</div>
      <div class="opts">
        <div class="opt"><input type="radio" id="q2a" name="q2" value="AB"><label for="q2a">플로럴, 시트러스 계열</label></div>
        <div class="opt"><input type="radio" id="q2b" name="q2" value="CD"><label for="q2b">초콜릿, 너티 계열</label></div>
        <div class="opt"><input type="radio" id="q2c" name="q2" value="EF"><label for="q2c">베리, 와인 계열</label></div>
        <div class="opt"><input type="radio" id="q2d" name="q2" value="GH"><label for="q2d">밸런스형, 부드러움</label></div>
      </div>
     </section>

     <!-- Q3 -->
     <section class="q">
      <div class="q-title">Q3. 선호하는 색감은?</div>
      <div class="gradient-bar">
        <label><input type="radio" name="q3" value="A"><span></span></label>
        <label><input type="radio" name="q3" value="B"><span></span></label>
        <label><input type="radio" name="q3" value="C"><span></span></label>
        <label><input type="radio" name="q3" value="D"><span></span></label>
        <label><input type="radio" name="q3" value="E"><span></span></label>
        <label><input type="radio" name="q3" value="F"><span></span></label>
        <label><input type="radio" name="q3" value="G"><span></span></label>
        <label><input type="radio" name="q3" value="H"><span></span></label>
      </div>
     </section>

     <!-- Q4 -->
     <section class="q">
      <div class="q-title">Q4. 오늘의 기분은?</div>
      <div class="opts">
        <div class="opt"><input type="radio" id="q4a" name="q4" value="AB"><label for="q4a">활기차고 에너지가 넘쳐요</label></div>
        <div class="opt"><input type="radio" id="q4b" name="q4" value="CD"><label for="q4b">차분하고 집중하고 싶어요</label></div>
        <div class="opt"><input type="radio" id="q4c" name="q4" value="EF"><label for="q4c">로맨틱하고 감성적이에요</label></div>
        <div class="opt"><input type="radio" id="q4d" name="q4" value="GH"><label for="q4d">편안하게 휴식하고 싶어요</label></div>
      </div>
     </section>

     <!-- Q5 -->
     <section class="q">
      <div class="q-title">Q5. 어떤 방식의 커피를 즐기시나요?</div>
      <div class="opts">
        <div class="opt"><input type="radio" id="q5a" name="q5" value="americano"><label for="q5a">아메리카노 (진하고 균형감)</label></div>
        <div class="opt"><input type="radio" id="q5b" name="q5" value="handdrip"><label for="q5b">핸드드립 (🍵 향미 선명, 깊이 즐김)</label></div>
        <div class="opt"><input type="radio" id="q5c" name="q5" value="coldbrew"><label for="q5c">콜드브루 (부드럽고 단맛, 아이스 전용)</label></div>
      </div>
     </section>

     <div class="submitbar">
       <div class="submitcard">
         <div class="progress"><span id="prog"></span></div>
         <button type="submit" class="btn">결과 보기</button>
       </div>
     </div>
    </form>
  </div>
</div>

<!-- 결과 모달 -->
<div class="result" id="result">
  <div class="result-card">
    <div class="result-body">
      <h2 class="result-title">나의 원두 조합</h2>
      <div class="combo-title" id="combo-title"></div>
      <div class="emoji-line" id="emoji-line"></div>
      <div class="bean-cards" id="bean-cards"></div>
      <div class="method-text" id="method-text"></div>
      <div class="method-text" id="mbti-text"></div>
      <div class="actions">
        <button class="btn-secondary" onclick="location.reload()">다시하기</button>
        <button class="close" onclick="document.getElementById('result').classList.remove('show')">닫기</button>
      </div>
    </div>
  </div>
</div>

<script>
/* ✅ 랜덤 배너 */
const banners = ["banner1.jpg","banner2.jpg","banner3.jpg","banner4.jpg","banner5.jpg","banner6.jpg"];
document.getElementById("banner-img").src = banners[Math.floor(Math.random()*banners.length)];

/* ✅ 원두 데이터 */
const TYPES={
  A:{ko:"행운 블렌드", color:"#f28c8c", note:"🍊🌺🍫"},
  B:{ko:"연인 블렌드", color:"#c3a6e8", note:"🍒❄️🥤"},
  C:{ko:"달 블렌드", color:"#b58c8c", note:"🌙🍷🍫"},
  D:{ko:"호깃 블렌드 (아주 긴 이름 예시)", color:"#f9d28e", note:"🍯🍏"},
  E:{ko:"아침의 시작", color:"#f6b48f", note:"☀️🍞"},
  F:{ko:"깊은 바다", color:"#c9a588", note:"🌊🍫"},
  G:{ko:"숲의 휴식", color:"#6a8f3b", note:"🌲🍵"},
  H:{ko:"밤의 고요", color:"#3b2a22", note:"🌌🍷"}
};

/* ✅ 조합 이름 */
const COMBO_TITLES={
  "A+B":"밝고 사랑스러운 조합",
  "C+D":"차분하고 지적인 조합",
  "E+F":"풍부하고 깊은 조합",
  "G+H":"편안하고 안정적인 조합"
};

/* ✅ MBTI 기반 온도 추천 */
const MBTI_TEMP={
  "E":"에너지를 나누는 당신에겐 아이스 커피가 잘 어울려요.",
  "I":"내향적인 당신에겐 따뜻한 커피가 마음을 채워줄 거예요.",
  "N":"새로움을 추구하는 당신에겐 아이스 커피가 잘 어울려요.",
  "S":"감각적인 당신에겐 따뜻한 커피가 잘 어울려요.",
  "F":"따뜻한 마음을 가진 당신, 따뜻한 커피가 더 어울려요.",
  "T":"이성적인 당신, 시원한 아이스 커피가 잘 어울려요.",
  "J":"계획적인 당신에겐 따뜻한 커피가 안정감을 줘요.",
  "P":"자유로운 당신에겐 아이스 커피가 잘 어울려요."
};

/* ✅ 방식 추천 */
const METHOD_TEXT={
  americano:"진하고 균형감 있는 아메리카노가 오늘의 당신에게 잘 어울려요.",
  handdrip:"향미가 선명한 핸드드립이 당신의 순간을 더욱 특별하게 해줄 거예요.",
  coldbrew:"부드럽고 달콤한 콜드브루가 당신의 하루에 잘 어울려요."
};

/* ✅ 제출 처리 */
const form=document.getElementById('quiz');
form.addEventListener('submit',e=>{
  e.preventDefault(); showResult();
});

function showResult(){
  const totals={A:0,B:0,C:0,D:0,E:0,F:0,G:0,H:0};
  ["q2","q3","q4"].forEach(q=>{
    const sel=form.querySelector(`input[name="${q}"]:checked`);
    if(sel) sel.value.split("").forEach(l=>totals[l]++);
  });
  const ei=form.querySelector('input[name="mbti-ei"]:checked')?.value;
  const ns=form.querySelector('input[name="mbti-ns"]:checked')?.value;
  const ft=form.querySelector('input[name="mbti-ft"]:checked')?.value;
  const jp=form.querySelector('input[name="mbti-jp"]:checked')?.value;
  if(ei==="E"){totals.F+=0.5;totals.B+=0.5;} if(ei==="I"){totals.A+=0.5;totals.C+=0.5;}
  if(ns==="N"){totals.D+=0.5;totals.E+=0.5;} if(ns==="S"){totals.G+=0.5;totals.H+=0.5;}
  if(ft==="F"){totals.B+=0.5;totals.C+=0.5;} if(ft==="T"){totals.A+=0.5;totals.D+=0.5;}
  if(jp==="J"){totals.F+=0.5;totals.H+=0.5;} if(jp==="P"){totals.E+=0.5;totals.G+=0.5;}

  const ordered=Object.entries(totals).sort((a,b)=>b[1]-a[1]);
  const top1=ordered[0][0], top2=ordered[1][0];
  const T1=TYPES[top1], T2=TYPES[top2];

  document.getElementById('combo-title').textContent=COMBO_TITLES[[top1,top2].sort().join('+')]||`${T1.ko}+${T2.ko}`;
  document.getElementById('emoji-line').textContent=`${T1.note}${T2.note}☕️🔥`;

  const cards=document.getElementById('bean-cards');
  cards.innerHTML=`<div class="bean"><div class="bean-title"><span class="dot" style="background:${T1.color}"></span>${T1.ko}</div><div class="bean-note">${T1.note}</div></div>
                   <div class="bean"><div class="bean-title"><span class="dot" style="background:${T2.color}"></span>${T2.ko}</div><div class="bean-note">${T2.note}</div></div>`;

  const method=form.querySelector('input[name="q5"]:checked')?.value;
  document.getElementById('method-text').textContent=METHOD_TEXT[method]||"";
  let mbtiText="";
  if(ei) mbtiText=MBTI_TEMP[ei]; if(ns) mbtiText=MBTI_TEMP[ns]; if(ft) mbtiText=MBTI_TEMP[ft]; if(jp) mbtiText=MBTI_TEMP[jp];
  document.getElementById('mbti-text').textContent=mbtiText;

  document.getElementById('result').classList.add('show');
}

/* ✅ 진행바 */
const prog=document.getElementById('prog');
form.addEventListener('change',()=>{
  const total=5;
  let answered=0;
  ["mbti-ei","mbti-ns","mbti-ft","mbti-jp","q2","q3","q4","q5"].forEach(name=>{
    if(form.querySelector(`input[name="${name}"]:checked`)) answered++;
  });
  const percent=Math.min(100,(answered/total)*100);
  prog.style.width=percent+"%";
});
</script>
</body>
</html>
